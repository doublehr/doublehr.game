!DOCTYPE html
html
head
    title俄罗斯方块title
    meta name=viewport content=width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no
    style
        body {
            display flex;
            justify-content center;
            align-items center;
            min-height 100vh;
            margin 0;
            background #2c3e50;
            color #ecf0f1;
            font-family Arial, sans-serif;
        }

        #game-container {
            display flex;
            gap 20px;
            background #34495e;
            padding 20px;
            border-radius 10px;
            box-shadow 0 0 20px rgba(0,0,0,0.3);
        }

        canvas {
            background #000;
            border 2px solid #ecf0f1;
        }

        #info-panel {
            display flex;
            flex-direction column;
            gap 15px;
            min-width 150px;
        }

        .info-box {
            background #2c3e50;
            padding 10px;
            border-radius 5px;
        }

        #mobile-controls {
            display none;
            gap 5px;
            margin-top 20px;
            flex-wrap wrap;
            justify-content center;
        }

        .mobile-btn {
            padding 12px;
            background #3498db;
            border none;
            border-radius 5px;
            color white;
            font-size 16px;
            cursor pointer;
            flex 1 1 45%;
        }

        .mobile-btnactive {
            background #2980b9;
        }

        #pause-overlay {
            display none;
            position absolute;
            top 50%;
            left 50%;
            transform translate(-50%, -50%);
            background rgba(0,0,0,0.8);
            color white;
            padding 20px 40px;
            border-radius 10px;
            font-size 24px;
        }
    style
head
body
    div id=game-container
        div id=info-panel
            div class=info-box
                div得分 span id=score0spandiv
                div消除行 span id=lines0spandiv
            div
            div class=info-box
                div下一个div
                canvas id=next-piece width=80 height=80canvas
            div
        div
        canvas id=game width=300 height=600canvas
    div
    
    div id=mobile-controlsdiv
    div id=pause-overlayPAUSEDdiv

script
const canvas = document.getElementById('game');
const nextCanvas = document.getElementById('next-piece');
const ctx = canvas.getContext('2d');
const nextCtx = nextCanvas.getContext('2d');
const BLOCK_SIZE = 30;
const COLS = 10;
const ROWS = 20;
let score = 0;
let lines = 0;
let isPaused = false;
let nextPiece = null;
let currentPiece = null;
let currentPieceX = 0;
let currentPieceY = 0;

 初始化移动端控制按钮
if (MobiAndroidi.test(navigator.userAgent)) {
    const controls = document.getElementById('mobile-controls');
    controls.style.display = 'flex';
    
    const buttons = [
        ['←', 'moveLeft'], ['→', 'moveRight'], ['↻', 'rotate'],
        ['↓', 'moveDown'], ['⏬', 'drop'], ['⏸️', 'togglePause'], ['↻', 'restart']
    ];
    
    buttons.forEach(([text, action]) = {
        const btn = document.createElement('button');
        btn.className = 'mobile-btn';
        btn.textContent = text;
        btn.onclick = () = handleAction(action);
        controls.appendChild(btn);
    });
}

 游戏初始化
function initGame() {
    board.forEach(row = row.fill(0));
    score = 0;
    lines = 0;
    document.getElementById('score').textContent = 0;
    document.getElementById('lines').textContent = 0;
    nextPiece = createPiece();
    currentPiece = createPiece();
    currentPieceX = Math.floor(COLS2) - Math.floor(currentPiece.shape[0].length2);
    currentPieceY = 0;
}

 新增：操作处理函数
function handleAction(action) {
    if (isPaused && action !== 'togglePause') return;
    
    switch(action) {
        case 'moveLeft' move(-1); break;
        case 'moveRight' move(1); break;
        case 'rotate' rotate(); break;
        case 'moveDown' moveDown(); break;
        case 'drop' drop(); break;
        case 'togglePause' togglePause(); break;
        case 'restart' initGame(); break;
    }
}

 新增：暂停功能
function toggleP